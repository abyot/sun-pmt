'use strict';

/* Filters */

var eventCaptureFilters = angular.module('eventCaptureFilters', [])

.filter('d2GroupFilter', function($filter){
	
    return function( data, filter ){
        if(!data ){
            return;
        }
        
        if(!filter){
            return data;
        }
        
        
        var filteredData = [];
        
        for(var key in data){
            angular.forEach(data[key], function(d){
                filteredData.push( d );
            });
        }        

        filteredData = $filter('filter')(filteredData, filter);
        
        filteredData = _.groupBy(filteredData, 'name');
        
        /*var result = [];
        angular.forEach(filteredData, function(d){
            
            if( !result[d.name] ){
                result[d.name] = [d];                
            }
            else{
                result[d.name].push(d);
            }            
        });
        
        console.log('the groups:  ', result*/
        
        //console.log('grouped:  ', filteredData);

        return filteredData;
    }; 
});